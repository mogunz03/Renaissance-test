<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=q, initial-scale=1.0" />
    <title>Inkfish Inspired Horizontal Scroll</title>
    <link rel="stylesheet" href="styles.css" /> 
  </head>
  <body>
    <nav class="header">
      <a href="index.html"
        ><img src="./assets/logo.png" alt="Camille Mormal Logo" class="nav-logo"
      /></a>
      <div class="nav-links">
        <a href="index.html" class="active-nav">Home</a>
        <a href="contact.html">Contact</a>
      </div>
    </nav>

    <div class="container">
      
      <section id="section-0" class="image-start-section">
        <div class="img img-1"><img src="./assets/img-1.jpg" alt="Starting image" class="fade-in-element" /></div>
      </section>
      
      <section id="section-1"> 
        <p class="reveal-text fade-in-element">
          I"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
          minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
          ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
          voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur
          sint occaecat cupidatat non proident, sunt in culpa qui officia
          deserunt mollit anim id est laborum."
          <br />
          <br />
          "Sed ut perspiciatis unde omnis iste natus error sit voluptatem
          accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae
          ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt
          explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut
          odit aut fugit, sed quia consequuntur magni dolores eos qui ratione
          voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum
          quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam
          eius modi tempora incidunt ut labore etm
        </p>
      </section>

      <section id="section-2" class="video-section">
        <div class="img video-container">
          <video autoplay loop playsinline controls muted class="fade-in-element">
            <source src="./assets/8877_1759806452.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>
      </section>

      <section id="section-3">
        <div class="img img-1"><img src="./assets/img-1.jpg" alt="" class="fade-in-element" /></div>
        <div class="img img-2"><img src="./assets/img-2.jpg" alt="" class="fade-in-element" /></div>
        <div class="img img-3"><img src="./assets/img-3.jpg" alt="" class="fade-in-element" /></div>
      </section>

      <section id="section-4">
        <div class="img img-4"><img src="./assets/img-4.jpg" alt="" class="fade-in-element" /></div>
        <div class="img img-5"><img src="./assets/img-5.jpg" alt="" class="fade-in-element" /></div>
        <div class="img img-6"><img src="./assets/img-6.jpg" alt="" class="fade-in-element" /></div>
      </section>

      <section id="section-5">
        <h1 class="reveal-text fade-in-element">
          Echoes of Rebellion, Couture Crafted for the Last Stand
        </h1>
        <p class="reveal-text fade-in-element">
          In the shadows of crumbling skyscrapers and forgotten streets, our
          fashion emerges as a beacon of defiance. Each piece in our collection
          is forged in the fires of rebellion, designed for the brave souls who
          dare to stand against the tide of conformity.
          <br /><br />
          Join the resistance styled in the essence of upheaval. Our creations
          are not just worn; they are wieldedâ€”each fabric, each seam imbued with
          the power of resilience. As the world edges closer to the precipice,
          clad yourself in our designs and become an icon of the revolution.
        </p>
      </section>

      <section id="section-6">
        <div class="img img-7"><img src="./assets/img-7.jpg" alt="" class="fade-in-element" /></div>
        <div class="img img-8"><img src="./assets/img-8.jpg" alt="" class="fade-in-element" /></div>
        <div class="img img-9"><img src="./assets/img-9.jpg" alt="" class="fade-in-element" /></div>
      </section>
    </div>

    <div class="timeline">
      <div class="scroller"><p>[<span>Drag</span>]</p></div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js"></script>
    
    <script>
      gsap.registerPlugin(Draggable);

      window.onload = function () {
        const timeline = document.querySelector(".timeline");
        const scroller = document.querySelector(".scroller");
        const container = document.querySelector(".container");
        const sections = document.querySelectorAll('section');
        const timelineWidth = timeline.offsetWidth;
        const scrollerWidth = scroller.offsetWidth;
        const gap = parseInt(window.getComputedStyle(document.body).fontSize);

        const maxDragX = timelineWidth - scrollerWidth - 2 * gap;
        const TOTAL_SECTIONS = 7; 
        
        // --- INITIAL SETUP ---
        
        // 1. Hide all elements that are NOT the text elements in Section 1 (index 1)
        const elementsToHide = document.querySelectorAll(
          "section:not(#section-1) .fade-in-element"
        );
        gsap.set(elementsToHide, { opacity: 0, y: 50 });


        // 2. TEXT REVEAL EFFECT (for the main text section on load - Section 1)
        gsap.from("#section-1 p.reveal-text", {
            y: 50, 
            opacity: 0, 
            duration: 1.5, 
            ease: "power3.out", 
            stagger: 0.3 
        });


        // HORIZONTAL SCROLL DRAGGABLE setup
        for (let i = 0; i < 50; i++) {
          const marker = document.createElement("div");
          marker.classList.add("marker");
          timeline.appendChild(marker);
        }

        Draggable.create(scroller, {
            type: "x",
            bounds: {
                minX: gap,
                maxX: timelineWidth - scrollerWidth - gap,
            },
            onDrag: function () {
                let progress = (this.x - gap) / maxDragX;
                // Calculate the container's target X position (0 to -600vw)
                let containerX = -600 * (timelineWidth / 100) * progress; 
                
                gsap.to(container, {
                    x: containerX,
                    duration: 0.5, 
                    ease: "power2.out",
                });
                
                // --- CONTINUOUS ELEMENT REVEAL LOGIC ---
                sections.forEach((section, index) => {
                    // Skip the text section which is always visible on the first view.
                    if (section.id === 'section-1') return; 

                    const elements = section.querySelectorAll('.fade-in-element');
                    if (elements.length === 0) return;

                    // Section's start position in pixels (where it begins to enter the screen)
                    const sectionStartOffset = section.offsetLeft - window.innerWidth;
                    
                    // The animation finishes when the section is fully visible
                    const triggerEnd = sectionStartOffset + window.innerWidth; 

                    // Current position of the container
                    const currentContainerX = gsap.getProperty(container, "x");
                    
                    // Calculate the element's progress based on container's scroll position
                    let elementProgress = (currentContainerX * -1 - sectionStartOffset) / (triggerEnd - sectionStartOffset);

                    // Clamp the progress between 0 (hidden) and 1 (fully revealed)
                    elementProgress = gsap.utils.clamp(0, 1, elementProgress);

                    // Animate the element group based on its progress
                    gsap.to(elements, {
                        opacity: elementProgress,
                        y: 50 * (1 - elementProgress), // Moves from 50px (hidden) to 0px (visible)
                        duration: 0.1, 
                        stagger: 0.05, 
                        ease: "none"
                    });
                });
            },
        });
      };
    </script>
  </body>
</html>